# yaml-language-server: $schema=https://json-schema.org/draft/2020-12/schema

$schema: https://json-schema.org/draft/2020-12/schema
description: MTR papers by sections
type: array
items:
  $ref: '#/$defs/section'


$defs:
  section:
    description: One single section on a webpage, with a table listing all papers to be shown in the section
    type: object
    properties:
      section:
        description: Section name
        type: string
      data:
        $ref: '#/$defs/data'
    additionalProperties: false

  data:
    description: .yaml files and keys
    type: array
    items:
      $ref: '#/$defs/data-item'

  data-item:
    type: object
    properties:
      file:
        description: .yaml file to read from
        type: string
      keys:
        description: Keys to use within the file
        type: array
        items:
          $ref: '#/$defs/key'
    additionalProperties: false


  key:
    description: Either a file or a directory
    oneOf:
      - description: File
        type: string
      - description: Directory
        type: object
        patternProperties:
          ^[^/]+$:
            description: Directory entry
            type: array
            items:
              $ref: '#/$defs/key'
        minProperties: 1
        maxProperties: 1
        additionalProperties: false